<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: panels/source/arrangers/CollapsingArranger.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: panels/source/arrangers/CollapsingArranger.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>(function (enyo, scope) {
	/**
	* _enyo.CollapsingArranger_ is an {@link enyo.Arranger} that
	* displays the active control, along with some number of inactive	controls to
	* fill the available space. The active control is positioned on the left side
	* of the container and the rest of the views are laid out to the right. The
	* last control, if visible, will expand to fill whatever space is not taken
	* up by the previous controls.
	*
	* For best results with CollapsingArranger, you should set a minimum width
	* for each control via a CSS style, e.g., `min-width: 25%` or
	* `min-width: 250px`.
	*
	* Transitions between arrangements are handled by sliding the new control	in
	* from the right and collapsing the old control to the left.
	*
	* For more information, see the documentation on
	* [Arrangers](building-apps/layout/arrangers.html) in the Enyo Developer Guide.
	*
	* @class enyo.CollapsingArranger
	* @extends enyo.CarouselArranger
	* @public
	*/
	enyo.kind(
		/** @lends enyo.CollapsingArranger.prototype */ {

		/**
		* @private
		*/
		name: "enyo.CollapsingArranger",

		/**
		* @private
		*/
		kind: "CarouselArranger",
		/**
		* The distance (in pixels) that each panel should be offset from the left
		* when it is selected. This allows controls on the underlying panel to the
		* left of the selected one to be partially revealed.
		*
		* *Note:* Imported from container at construction-time.
		*
		* @public
		*/
		peekWidth: 0,

		/**
		* If a panel is added or removed after construction, ensure that any control marked to fill
		* remaining space (by `_fit` member on control) is reset.
		*
		* @see {@link enyo.Arranger#size}
		* @method
		* @protected
		*/
		size: enyo.inherit(function (sup) {
			return function () {
				this.clearLastSize();
				sup.apply(this, arguments);
			};
		}),

		/**
		* Resets any panel marked to fill remaining space that isn't, in fact, the last panel
		*
		* @private
		*/
		clearLastSize: function () {
			for (var i=0, c$=this.container.getPanels(), c; (c=c$[i]); i++) {
				if (c._fit &amp;&amp; i != c$.length-1) {
					c.applyStyle("width", null);
					c._fit = null;
				}
			}
		},

		/**
		* @method
		* @private
		*/
		constructor: enyo.inherit(function (sup) {
			return function () {
				sup.apply(this, arguments);
				this.peekWidth = this.container.peekWidth != null ? this.container.peekWidth : this.peekWidth;
			};
		}),

		/**
		* Arranges controls from left to right starting with first panel. If
		* {@link enyo.CollapsingArranger#peekWidth} is set, any visible control whose index is
		* less than `arrangement` (the active panel's index) will be revealed by `peekWidth`
		* pixels.
		*
		* @see {@link enyo.Arranger#arrange}
		* @protected
		*/
		arrange: function (controls, arrangement) {
			var c$ = this.container.getPanels();
			for (var i=0, e=this.containerPadding.left, c, n=0; (c=c$[i]); i++) {
				if(c.getShowing()){
					this.arrangeControl(c, {left: e + n * this.peekWidth});
					if (i >= arrangement) {
						e += c.width + c.marginWidth - this.peekWidth;
					}
					n++;
				} else {
					this.arrangeControl(c, {left: e});
					if (i >= arrangement) {
						e += c.width + c.marginWidth;
					}
				}
				// FIXME: overdragging-ish
				if (i == c$.length - 1 &amp;&amp; arrangement &lt; 0) {
					this.arrangeControl(c, {left: e - arrangement});
				}
			}
		},

		/**
		* Calculates the change in `left` position of the last panel for the two arrangements
		* `a0` and `a1`
		*
		* @see {@link enyo.Arranger#calcArrangementDifference}
		* @private
		*/
		calcArrangementDifference: function (i0, a0, i1, a1) {
			var i = this.container.getPanels().length-1;
			return Math.abs(a1[i].left - a0[i].left);
		},

		/**
		* If the container's `realtimeFit` is `true`, resizes the last panel to fill the space.
		* This ensures that will dragging or animating to the last index, there is never blank
		* space to the right of the last panel. If `realtimeFit` is falsey, the last panel is not
		* resized until {@link enyo.CollapsingArranger#finish}.
		*
		* @see {@link enyo.Arranger#flowControls}
		* @method
		* @private
		*/
		flowControl: enyo.inherit(function (sup) {
			return function (inControl, inA) {
				sup.apply(this, arguments);
				if (this.container.realtimeFit) {
					var c$ = this.container.getPanels();
					var l = c$.length-1;
					var last = c$[l];
					if (inControl == last) {
						this.fitControl(inControl, inA.left);
					}
				}

			};
		}),

		/**
		* Ensures the last panel fills the remaining space when a transition completes
		*
		* @see {@link enyo.Arranger#finish}
		* @method
		* @private
		*/
		finish: enyo.inherit(function (sup) {
			return function () {
				sup.apply(this, arguments);
				if (!this.container.realtimeFit &amp;&amp; this.containerBounds) {
					var c$ = this.container.getPanels();
					var a$ = this.container.arrangement;
					var l = c$.length-1;
					var c = c$[l];
					this.fitControl(c, a$[l].left);
				}
			};
		}),

		/**
		* Resizes `control` to match the width of the container minus the given `offset`
		*
		* @param {enyo.Control} control - Control that should `_fit` in the remaining space
		* @param {Number} offset        - Left offset of the control with respect to the container
		* @private
		*/
		fitControl: function (control, offset) {
			control._fit = true;
			control.applyStyle("width", (this.containerBounds.width - offset) + "px");
			control.resize();
		}
	});

})(enyo, this);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="enyo.AlphaJumper.html">AlphaJumper</a></li><li><a href="enyo.AlphaJumpList.html">AlphaJumpList</a></li><li><a href="enyo.AroundList.html">AroundList</a></li><li><a href="enyo.Arranger.html">Arranger</a></li><li><a href="enyo.CardArranger.html">CardArranger</a></li><li><a href="enyo.CardSlideInArranger.html">CardSlideInArranger</a></li><li><a href="enyo.CarouselArranger.html">CarouselArranger</a></li><li><a href="enyo.CollapsingArranger.html">CollapsingArranger</a></li><li><a href="enyo.ContextualLayout.html">ContextualLayout</a></li><li><a href="enyo.DockRightArranger.html">DockRightArranger</a></li><li><a href="enyo.FittableColumns.html">FittableColumns</a></li><li><a href="enyo.FittableColumnsLayout.html">FittableColumnsLayout</a></li><li><a href="enyo.FittableHeaderLayout.html">FittableHeaderLayout</a></li><li><a href="enyo.FittableLayout.html">FittableLayout</a></li><li><a href="enyo.FittableRows.html">FittableRows</a></li><li><a href="enyo.FittableRowsLayout.html">FittableRowsLayout</a></li><li><a href="enyo.FlyweightRepeater.html">FlyweightRepeater</a></li><li><a href="enyo.GridListImageItem.html">GridListImageItem</a></li><li><a href="enyo.LeftRightArranger.html">LeftRightArranger</a></li><li><a href="enyo.List.html">List</a></li><li><a href="enyo.Node.html">Node</a></li><li><a href="enyo.Panels.html">Panels</a></li><li><a href="enyo.PulldownList.html">PulldownList</a></li><li><a href="enyo.Puller.html">Puller</a></li><li><a href="enyo.Slideable.html">Slideable</a></li><li><a href="enyo.SpiralArranger.html">SpiralArranger</a></li><li><a href="enyo.TopButtonArranger.html">TopButtonArranger</a></li></ul><h3>Events</h3><ul><li><a href="enyo.AlphaJumper.html#event:event:onAlphaJump">event:onAlphaJump</a></li><li><a href="enyo.AlphaJumpList.html#event:event:onReorder">event:onReorder</a></li><li><a href="enyo.AlphaJumpList.html#event:event:onSetupItem">event:onSetupItem</a></li><li><a href="enyo.AlphaJumpList.html#event:event:onSetupPinnedReorderComponents">event:onSetupPinnedReorderComponents</a></li><li><a href="enyo.AlphaJumpList.html#event:event:onSetupReorderComponents">event:onSetupReorderComponents</a></li><li><a href="enyo.AlphaJumpList.html#event:event:onSetupSwipeItem">event:onSetupSwipeItem</a></li><li><a href="enyo.AlphaJumpList.html#event:event:onSwipe">event:onSwipe</a></li><li><a href="enyo.AlphaJumpList.html#event:event:onSwipeComplete">event:onSwipeComplete</a></li><li><a href="enyo.AlphaJumpList.html#event:event:onSwipeDrag">event:onSwipeDrag</a></li><li><a href="enyo.AroundList.html#event:event:onReorder">event:onReorder</a></li><li><a href="enyo.AroundList.html#event:event:onSetupItem">event:onSetupItem</a></li><li><a href="enyo.AroundList.html#event:event:onSetupPinnedReorderComponents">event:onSetupPinnedReorderComponents</a></li><li><a href="enyo.AroundList.html#event:event:onSetupReorderComponents">event:onSetupReorderComponents</a></li><li><a href="enyo.AroundList.html#event:event:onSetupSwipeItem">event:onSetupSwipeItem</a></li><li><a href="enyo.AroundList.html#event:event:onSwipe">event:onSwipe</a></li><li><a href="enyo.AroundList.html#event:event:onSwipeComplete">event:onSwipeComplete</a></li><li><a href="enyo.AroundList.html#event:event:onSwipeDrag">event:onSwipeDrag</a></li><li><a href="enyo.FlyweightRepeater.html#event:event:onRenderRow">event:onRenderRow</a></li><li><a href="enyo.FlyweightRepeater.html#event:event:onSetupItem">event:onSetupItem</a></li><li><a href="enyo.List.html#event:event:onReorder">event:onReorder</a></li><li><a href="enyo.List.html#event:event:onSetupItem">event:onSetupItem</a></li><li><a href="enyo.List.html#event:event:onSetupPinnedReorderComponents">event:onSetupPinnedReorderComponents</a></li><li><a href="enyo.List.html#event:event:onSetupReorderComponents">event:onSetupReorderComponents</a></li><li><a href="enyo.List.html#event:event:onSetupSwipeItem">event:onSetupSwipeItem</a></li><li><a href="enyo.List.html#event:event:onSwipe">event:onSwipe</a></li><li><a href="enyo.List.html#event:event:onSwipeComplete">event:onSwipeComplete</a></li><li><a href="enyo.List.html#event:event:onSwipeDrag">event:onSwipeDrag</a></li><li><a href="enyo.Node.html#event:event:onDestroyed">event:onDestroyed</a></li><li><a href="enyo.Node.html#event:event:onExpand">event:onExpand</a></li><li><a href="enyo.Node.html#event:event:onNodeDblClick">event:onNodeDblClick</a></li><li><a href="enyo.Node.html#event:event:onNodeTap">event:onNodeTap</a></li><li><a href="enyo.Panels.html#event:event:onTransitionFinish">event:onTransitionFinish</a></li><li><a href="enyo.Panels.html#event:event:onTransitionStart">event:onTransitionStart</a></li><li><a href="enyo.PulldownList.html#event:event:onPull">event:onPull</a></li><li><a href="enyo.PulldownList.html#event:event:onPullCancel">event:onPullCancel</a></li><li><a href="enyo.PulldownList.html#event:event:onPullComplete">event:onPullComplete</a></li><li><a href="enyo.PulldownList.html#event:event:onPullRelease">event:onPullRelease</a></li><li><a href="enyo.PulldownList.html#event:event:onPullStart">event:onPullStart</a></li><li><a href="enyo.PulldownList.html#event:event:onReorder">event:onReorder</a></li><li><a href="enyo.PulldownList.html#event:event:onSetupItem">event:onSetupItem</a></li><li><a href="enyo.PulldownList.html#event:event:onSetupPinnedReorderComponents">event:onSetupPinnedReorderComponents</a></li><li><a href="enyo.PulldownList.html#event:event:onSetupReorderComponents">event:onSetupReorderComponents</a></li><li><a href="enyo.PulldownList.html#event:event:onSetupSwipeItem">event:onSetupSwipeItem</a></li><li><a href="enyo.PulldownList.html#event:event:onSwipe">event:onSwipe</a></li><li><a href="enyo.PulldownList.html#event:event:onSwipeComplete">event:onSwipeComplete</a></li><li><a href="enyo.PulldownList.html#event:event:onSwipeDrag">event:onSwipeDrag</a></li><li><a href="enyo.Puller.html#event:event:onCreate">event:onCreate</a></li><li><a href="enyo.Slideable.html#event:event:onAnimateFinish">event:onAnimateFinish</a></li><li><a href="enyo.Slideable.html#event:event:onChange">event:onChange</a></li></ul><h3>Global</h3><ul><li><a href="global.html#animate">animate</a></li><li><a href="global.html#cleanupMemory">cleanupMemory</a></li><li><a href="global.html#defaultScale">defaultScale</a></li><li><a href="global.html#horizontalDragPropagation">horizontalDragPropagation</a></li><li><a href="global.html#lowMemory">lowMemory</a></li><li><a href="global.html#thumb">thumb</a></li><li><a href="global.html#touchOverscroll">touchOverscroll</a></li><li><a href="global.html#verticalDragPropagation">verticalDragPropagation</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Wed Jul 16 2014 16:39:22 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
